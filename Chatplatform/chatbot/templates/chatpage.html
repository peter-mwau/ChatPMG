<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <script src="https://cdn.tailwindcss.com"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Page</title>
</head>
<body id="hed">
    {% csrf_token %}
    <div id="container" class="h-auto w-auto">
        <!-- <img src="" class="rounded-full w-20 ml-3 border-2"> -->
        <div class="w-auto bg-white p-5 shadow-2xl flex flex">
            <h2 class="text-2xl text-black font bold mx-auto align-center font-bold">Welcome to ChatApp</h2>
            <div class="flex items-center space-x-2">
                <button type="button" id="search" class="inline-flex items-center justify-center rounded-lg border h-10 w-10 transition duration-500 ease-in-out text-gray-500 hover:bg-gray-300 focus:outline-none">
                   <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="h-6 w-6">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                   </svg>
                </button>
                <button type="button" class="inline-flex items-center justify-center rounded-lg border h-10 w-10 transition duration-500 ease-in-out text-gray-500 hover:bg-gray-300 focus:outline-none">
                   <svg xmlns="http://www.w3.org/2000/svg" id='love' fill="none" viewBox="0 0 24 24" stroke="currentColor" class="h-6 w-6">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                   </svg>
                </button>
                <button type="button" class="inline-flex items-center justify-center rounded-lg border h-10 w-10 transition duration-500 ease-in-out text-gray-500 hover:bg-gray-300 focus:outline-none">
                   <!-- <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="h-6 w-6">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                   </svg> -->
                   <img src="night-mode-svgrepo-com (1).svg" class="h-6 w-6" id="togglebtn">
                </button>
             </div>
        </div>
        <!-- //display/append this div/message if submit btn is clicked -->
        <!-- <div id="message" class="w-auto bg-white p-5 shadow-2xl flex flex-col h-auto overflow-y-auto">
            <p class="p-4 m-2 border-2 shadow-2xl rounded-2xl" id="p" >Yes Buddy!</p>
        </div> -->
        
        <div class="h-auto w-2/3 place-self-start space-y-12 h-auto overflow-y-auto" id="messages">
            <p class="p-4 m-2 border-2 shadow-2xl rounded-2xl" id="p">{{form.query}}</p>
        </div>
        <div class="h-auto w-2/3 place-self-end space-y-12 ml-[33%]">
            <p class="p-4 m-2 border-2 shadow-2xl rounded-2xl">{{form.response}}</p>
        </div>
        <div class="border-1 mt-[36%] w-full p-4 h-20 flex flex shadow-2xl">
            {% comment %} <input type="text" placeholder="Prompt.." class="border-2 rounded-md p-3 flex-start w-5/6 shadow-2xl ml-[60px]" id="input"> {% endcomment %}
            <p type="text" placeholder="Prompt.." class="border-2 rounded-md p-3 flex-start w-5/6 shadow-2xl ml-[60px]" id="input">{{form.query}}</p>
            <button type="submit" class="flex-end ml-10 shadow-2xl bg-black text-white font-bold p-3 rounded-xl hover:bg-gray-200 hover:text-black hover:shadow-2xl" id="btn">Submit</button>
        </div>
    </div>
</body>
<script>
    var container = document.getElementById('togglebtn');
    container.onclick = function(){
        container.classList.toggle("transform");
        //container.classList.toggle("rotate-180");
        //onclick, change the button to another
        if(container.classList.contains("transform")){
            container.src = "./night-mode-svgrepo-com.svg";
            //mode to dark
            let y = document.getElementById('hed');
            let inp = document.getElementById('input')
            //make backgroung black
            document.body.style.backgroundColor = "black";
            //text to white
            y.style.color = "white";
            inp.style.color = "black";

        }else{
            container.src = "./night-mode-svgrepo-com (1).svg";
             //mode to dark
             let y = document.getElementById('hed');
             //make backgroung black
             document.body.style.backgroundColor = "white";
             //text to white
             y.style.color = "black";

        }

    }
    var message = document.getElementById('user')
    var btn = document.getElementById('btn')
    //make enter button also funtion as submit
    document.getElementById('input').addEventListener("keyup", function(event){
        if(event.keyCode === 13){
            event.preventDefault();
            document.getElementById('btn').click();
        }
    })
    //onclick btn append messahe to user id
    btn.onclick = function(){
        var input = document.getElementById('input').value;
        var p = document.getElementById('p');
        p.innerHTML = input;
        message.appendChild(p);
        //clear input
        document.getElementById('input').value = "";
    }
    const el = document.getElementById('messages')
     el.scrollTop = el.scrollHeight

    var love = document.getElementById('love')
    //onclick change to red and toggle back on another click
    love.onclick = function(){
        love.style.color = "red";
    }
    //toggle love from red to gray onclick
    love.ondblclick = function(){
        love.style.color = "gray";
    }
    
    var search = document.getElementById('search')
    //onclick, display an input window beside the search button to its left only once
    search.onclick = function(){
        var input = document.createElement('input');
        input.setAttribute('type', 'text');
        input.setAttribute('placeholder', 'Search..');
        input.setAttribute('class', 'border-2 rounded-md p-3 flex-start w-5/6 shadow-2xl ml-[60px]');
        search.appendChild(input);
    }
</script>
</html>